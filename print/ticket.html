<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>–ö–≤–∏—Ç–æ–∫ (–∫–∞—Å–∞)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body{
      margin:0;
      padding:16px;
      background:#f3f4f6;
      font-family:system-ui,-apple-system,"Segoe UI",sans-serif;
      color:#111827;
    }
    .ticket{
      width:260px;
      margin:0 auto;
      background:#fff;
      border-radius:14px;
      box-shadow:0 10px 25px rgba(0,0,0,.12);
      padding:14px;
    }
    .title{
      font-size:14px;
      font-weight:800;
      text-align:center;
      margin-bottom:6px;
      text-transform:uppercase;
    }
    .row{
      font-size:12px;
      margin:4px 0;
    }
    .qr-wrap{
      margin:12px auto;
      width:180px;
      height:180px;
      display:flex;
      align-items:center;
      justify-content:center;
      border:1px solid #e5e7eb;
      border-radius:12px;
    }
    .footer{
      font-size:10px;
      color:#6b7280;
      text-align:center;
      margin-top:8px;
      line-height:1.3;
    }

    @media print{
      body{ background:#fff; padding:0; }
      .ticket{ box-shadow:none; }
    }
  </style>

  <!-- –ª–æ–∫–∞–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ QR -->
  <script src="../vendor/qrcode.min.js"></script>
</head>

<body>
  <div class="ticket">
    <div class="title" id="showTitle">–ö–≤–∏—Ç–æ–∫</div>

    <div class="row" id="rowSeat"></div>
    <div class="row" id="rowPrice"></div>
    <div class="row" id="rowOrder"></div>

    <div class="qr-wrap" id="qrBox"></div>

    <div class="footer">
      –ü–æ–∫–∞–∂—ñ—Ç—å —Ü–µ–π –∫–≤–∏—Ç–æ–∫ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—É –Ω–∞ –≤—Ö–æ–¥—ñ<br>
      –ö–∞–Ω–∞–ª: –∫–∞—Å–∞
    </div>
  </div>

  <script>
    (function(){
      const qs = new URLSearchParams(location.search);

      const show  = qs.get("show")  || "";
      const seat  = qs.get("seat")  || "";
      const price = qs.get("price") || "";
      const order = qs.get("order") || "";

      if(show)  document.getElementById("showTitle").textContent = show;
      if(seat)  document.getElementById("rowSeat").textContent  = "–ú—ñ—Å—Ü–µ: " + seat;
      if(price) document.getElementById("rowPrice").textContent = "–¶—ñ–Ω–∞: " + price + " –≥—Ä–Ω";
      if(order) document.getElementById("rowOrder").textContent = "Order: " + order;

      // üîë –ö–õ–Æ–ß–ï–í–û–ï
      // —Ñ–æ—Ä–º–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π scanner.js –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ—Ñ–ª–∞–π–Ω:
      // order:CASH-...
      const qrPayload = "order:" + order;

      const box = document.getElementById("qrBox");

      if(!window.QRCode || !order){
        box.textContent = "QR –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π";
        return;
      }

      new QRCode(box, {
        text: qrPayload,
        width: 170,
        height: 170,
        correctLevel: QRCode.CorrectLevel.M
      });

      // –∞–≤—Ç–æ–ø–µ—á–∞—Ç—å (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
      if(qs.get("print") === "1"){
        setTimeout(()=>window.print(), 300);
      }
    })();
  </script>
</body>
</html>
