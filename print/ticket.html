<!doctype html>
<html lang="uk">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Квиток</title>

<!-- QR библиотека -->
<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.4/build/qrcode.min.js"></script>

<style>
  body{
    margin:0;
    padding:6mm;
    font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
    color:#000;
  }
  .ticket{
    width:72mm;
  }
  .center{ text-align:center; }
  .title{
    font-weight:800;
    font-size:14px;
    margin-bottom:4px;
  }
  .row{
    font-size:12px;
    margin:2px 0;
  }
  .price{
    font-size:14px;
    font-weight:800;
    margin:6px 0;
  }
  #qr{
    display:flex;
    justify-content:center;
    margin:6px 0;
  }
  .small{
    font-size:10px;
    line-height:1.3;
  }
  .sep{
    border-top:1px dashed #000;
    margin:6px 0;
  }
</style>
</head>

<body>
  <div class="ticket">
    <div class="center title" id="theatre"></div>
    <div class="center row"><b>КВИТОК</b></div>

    <div class="sep"></div>

    <div class="row" id="title"></div>
    <div class="row" id="datetime"></div>
    <div class="row" id="seat"></div>
    <div class="price">Ціна: <span id="price"></span> грн</div>

    <div id="qr"></div>

    <div class="small center">
      Квиток дійсний на одну особу<br>
      Зберігайте до кінця вистави
    </div>

    <div class="sep"></div>

    <div class="small center" id="order"></div>
  </div>

<script>
(function(){
  const q = new URLSearchParams(location.search);

  const theatre = q.get("theatre") || "Театр";
  const title   = q.get("title")   || "";
  const date    = q.get("date")    || "";
  const time    = q.get("time")    || "";
  const seat    = q.get("seat")    || "";
  const price   = q.get("price")   || "";
  const order   = q.get("order")   || "";

  document.getElementById("theatre").textContent = theatre;
  document.getElementById("title").textContent   = title;
  document.getElementById("datetime").textContent =
    (date || time) ? `Дата/час: ${date} ${time}` : "";
  document.getElementById("seat").textContent    = seat;
  document.getElementById("price").textContent   = price;
  document.getElementById("order").textContent   = order;

  const payload =
    `order:${order}|seat:${seat}|date:${date}|time:${time}`;

  QRCode.toCanvas(
    payload,
    { width:180, margin:1 },
    function(err, canvas){
      if(!err){
        document.getElementById("qr").appendChild(canvas);
        setTimeout(()=>window.print(),200);
      }
    }
  );
})();
</script>
</body>
</html>
