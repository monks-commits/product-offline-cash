<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>–ü–æ–¥—ñ—ó ‚Äî —Ä–æ–±–æ—á—ñ —Å–µ–∞–Ω—Å–∏</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="../../styles.css">

  <style>
    body {
      margin: 0;
      background: #f1f5f9;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      color: #0f172a;
    }

    .page {
      max-width: 1200px;
      margin: auto;
      padding: 24px;
    }

    h1 {
      margin: 0 0 16px;
    }

    .list {
      display: grid;
      gap: 14px;
    }

    .event {
      background: #ffffff;
      border-radius: 14px;
      padding: 16px;
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 16px;
      align-items: center;
      box-shadow: 0 4px 14px rgba(0,0,0,.06);
    }

    .event h3 {
      margin: 0 0 6px;
      font-size: 18px;
    }

    .meta {
      font-size: 14px;
      color: #475569;
    }

    .actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .btn {
      padding: 10px 14px;
      border-radius: 10px;
      border: none;
      font-weight: 700;
      cursor: pointer;
    }

    .btn-open {
      background: #16a34a;
      color: #fff;
    }

    .btn-edit {
      background: #e2e8f0;
      color: #0f172a;
    }

    .empty {
      background: #fff;
      padding: 20px;
      border-radius: 14px;
      text-align: center;
      color: #64748b;
    }
  </style>
</head>

<body>

<!-- –æ–±—â–∞—è —à–∞–ø–∫–∞ –∞–¥–º–∏–Ω–∞ -->
<div id="admin-header"></div>

<div class="page">
  <h1>üé≠ –ü–æ–¥—ñ—ó ‚Äî —Ä–æ–±–æ—á—ñ —Å–µ–∞–Ω—Å–∏</h1>

  <div id="events" class="list">
    <div class="empty">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è‚Ä¶</div>
  </div>
</div>

<script>
/* –ø–æ–¥–∫–ª—é—á–∞–µ–º —à–∞–ø–∫—É */
fetch("../index.html")
  .then(r => r.text())
  .then(html => document.getElementById("admin-header").innerHTML = html);

/* –∑–∞–≥—Ä—É–∑–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ–∞–Ω—Å–æ–≤ */
const eventsBox = document.getElementById("events");

fetch("../../data/seances/")
  .then(() => {
    // GitHub Pages –Ω–µ –¥–∞—ë—Ç –ª–∏—Å—Ç–∏–Ω–≥ ‚Äî —Ä–∞–±–æ—Ç–∞–µ–º —á–µ—Ä–µ–∑ —Å–ø–∏—Å–æ–∫ –≤—Ä—É—á–Ω—É—é
    const seances = [
      "koncert-2026-02-10-19-00.json"
      // –ø–æ–∑–∂–µ —Ç—É—Ç –±—É–¥–µ—Ç –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è
    ];

    eventsBox.innerHTML = "";

    seances.forEach(file => {
      fetch(`../../data/seances/${file}`)
        .then(r => r.json())
        .then(data => {
          const id = file.replace(".json","");
          const title = data.title || id;
          const date = data.datetime || "";

          const el = document.createElement("div");
          el.className = "event";

          el.innerHTML = `
            <div>
              <h3>${title}</h3>
              <div class="meta">${date}</div>
              <div class="meta">ID: ${id}</div>
            </div>

            <div class="actions">
              <button class="btn btn-open"
                onclick="openCash('${id}')">
                –í—ñ–¥–∫—Ä–∏—Ç–∏ –∫–∞—Å—É
              </button>

              <button class="btn btn-edit"
                onclick="editSeance('${id}')">
                –†–µ–¥–∞–≥—É–≤–∞—Ç–∏
              </button>
            </div>
          `;

          eventsBox.appendChild(el);
        });
    });

    if (!seances.length) {
      eventsBox.innerHTML = `<div class="empty">–ù–µ–º–∞—î –∞–∫—Ç–∏–≤–Ω–∏—Ö —Å–µ–∞–Ω—Å—ñ–≤</div>`;
    }
  });

function openCash(id) {
  // –∞–¥–º–∏–Ω –≤—Ö–æ–¥–∏—Ç –≤ –¢–£ –ñ–ï –∫–∞—Å—Å—É, —á—Ç–æ –∏ –∫–∞—Å—Å–∏—Ä
  window.location.href =
    "../../cashier/sales/index.html?seance=" + id;
}

function editSeance(id) {
  window.location.href =
    "../create/index.html?seance=" + id;
}
</script>

</body>
</html>
