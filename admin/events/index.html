<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>–ü–æ–¥—ñ—ó ‚Äî –∞–∫—Ç–∏–≤–Ω—ñ —Å–µ–∞–Ω—Å–∏</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="../styles.css">

<style>
.page-wrap{padding:20px;max-width:1200px;margin:auto}
h1{margin-bottom:14px}

.list{display:grid;gap:12px}
.item{
  background:#fff;
  border-radius:14px;
  padding:14px 16px;
  box-shadow:0 4px 14px rgba(0,0,0,.06);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:14px;
}
.meta{font-size:14px;color:#374151}
.meta b{font-size:16px;color:#111827}

.actions{display:flex;gap:10px}
.btn{
  padding:8px 14px;
  border-radius:10px;
  border:none;
  font-weight:800;
  cursor:pointer;
}
.btn-primary{background:#111827;color:#fff}
.btn-ghost{background:#f3f4f6}
.badge{
  padding:4px 10px;
  border-radius:999px;
  font-size:12px;
  background:#bbf7d0;
  color:#14532d;
  font-weight:700;
}
.empty{
  padding:30px;
  text-align:center;
  opacity:.6;
}
</style>
</head>

<body>

<div id="admin-header"></div>

<main class="page-wrap">
  <h1>üé≠ –ê–∫—Ç–∏–≤–Ω—ñ –ø–æ–¥—ñ—ó (–≥–æ—Ç–æ–≤—ñ –¥–æ –ø—Ä–æ–¥–∞–∂—É)</h1>

  <div id="list" class="list"></div>
</main>

<script>
/* =========================
   CONFIG
========================= */

// ‚ùó –Ø–í–ù–û –ø–µ—Ä–µ—á–∏—Å–ª—è–µ–º —Ñ–∞–π–ª—ã (–æ—Ñ–ª–∞–π–Ω-—Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å)
const SEANCES = [
  "../data/seances/koncert-2026-02-10-19-00.json"
];

/* =========================
   LOAD
========================= */
const list = document.getElementById("list");

async function loadEvents(){
  const ready = [];

  for (const url of SEANCES){
    try{
      const res = await fetch(url);
      const data = await res.json();

      if (data.status === "ready"){
        ready.push(data);
      }
    }catch(e){
      console.warn("–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏", url);
    }
  }

  render(ready);
}

function render(items){
  if (!items.length){
    list.innerHTML = `<div class="empty">–ù–µ–º–∞—î –≥–æ—Ç–æ–≤–∏—Ö —Å–µ–∞–Ω—Å—ñ–≤</div>`;
    return;
  }

  list.innerHTML = items.map(s=>`
    <div class="item">
      <div class="meta">
        <b>${s.event || "–ü–æ–¥—ñ—è"}</b><br>
        ${s.date} ‚Ä¢ ${s.time}<br>
        <small>${s.seance_id}</small>
      </div>

      <span class="badge">READY</span>

      <div class="actions">
        <button class="btn btn-primary"
          onclick="openSales('${s.seance_id}')">
          –ü—Ä–æ–¥–∞–∂—ñ
        </button>

        <button class="btn btn-ghost"
          onclick="editSeance('${s.seance_id}')">
          –†–µ–¥–∞–≥—É–≤–∞—Ç–∏
        </button>
      </div>
    </div>
  `).join("");
}

/* =========================
   ACTIONS
========================= */
function openSales(id){
  location.href = `../sales/?seance=${id}`;
}

function editSeance(id){
  location.href = `../create/?edit=${id}`;
}

/* =========================
   HEADER
========================= */
fetch("../index.html")
  .then(r=>r.text())
  .then(html=>{
    document.getElementById("admin-header").innerHTML = html;
  });

loadEvents();
</script>

</body>
</html>
