<!doctype html>
<html lang="uk">
<head>
<meta charset="utf-8" />
<title>Квиток</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />

<!-- QR generator (работает без сборки, можно с GitHub Pages) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
  body{
    margin:0;
    background:#eef2f7;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  }
  .ticket{
    width:320px;
    margin:20px auto;
    background:#fff;
    border-radius:14px;
    padding:18px 18px 16px;
    box-shadow:0 10px 30px rgba(0,0,0,.15);
  }
  h1{
    margin:0;
    font-size:18px;
    text-align:center;
    font-weight:800;
  }
  .event{
    text-align:center;
    font-weight:700;
    margin:4px 0 12px;
  }
  .row{
    display:flex;
    justify-content:space-between;
    font-size:14px;
    margin:4px 0;
  }
  .price{
    font-size:18px;
    font-weight:900;
    text-align:right;
    margin-top:6px;
  }
  .sep{
    border-top:1px dashed #cbd5e1;
    margin:10px 0;
  }
  #qr{
    display:flex;
    justify-content:center;
    margin:10px 0;
  }
  .order{
    font-size:11px;
    word-break:break-all;
    color:#475569;
    margin-top:6px;
  }
  .foot{
    font-size:11px;
    text-align:center;
    color:#64748b;
    margin-top:8px;
  }

  @media print{
    body{background:#fff;}
    .ticket{box-shadow:none;margin:0;}
  }
</style>
</head>

<body>

<div class="ticket">
  <h1>Театр ім. Т. Г. Шевченка</h1>
  <div class="event" id="event">—</div>

  <div class="row"><span>Дата</span><b id="date">—</b></div>
  <div class="row"><span>Час</span><b id="time">—</b></div>
  <div class="row"><span>Зона</span><b id="zone">—</b></div>
  <div class="row"><span>Ряд</span><b id="row">—</b></div>
  <div class="row"><span>Місце</span><b id="seat">—</b></div>

  <div class="price"><span id="price">0</span> грн</div>

  <div class="sep"></div>

  <div id="qr"></div>

  <div class="order" id="orderText"></div>

  <div class="foot">
    Офлайн каса • Vash Admin
  </div>
</div>

<script>
const p = new URLSearchParams(location.search);

const data = {
  event: p.get("event") || "",
  date:  p.get("date")  || "",
  time:  p.get("time")  || "",
  zone:  p.get("zone")  || "",
  row:   p.get("row")   || "",
  seat:  p.get("seat")  || "",
  price: p.get("price") || "",
  order: p.get("order") || ""
};

// Заполняем текст
for(const k in data){
  const el = document.getElementById(k);
  if(el) el.textContent = data[k];
}

document.getElementById("orderText").textContent =
  "order:" + data.order +
  "|event:" + data.event +
  "|date:"  + data.date +
  "|time:"  + data.time +
  "|zone:"  + data.zone +
  "|row:"   + data.row +
  "|seat:"  + data.seat +
  "|price:" + data.price;

// === QR PAYLOAD (СОВМЕСТИМ С scanner.js) ===
const qrPayload =
  "order:" + data.order +
  "|seat:" + data.zone + "-" + data.row + "-" + data.seat +
  "|date:" + data.date +
  "|time:" + data.time;

new QRCode(document.getElementById("qr"),{
  text: qrPayload,
  width:180,
  height:180,
  correctLevel: QRCode.CorrectLevel.M
});
</script>

</body>
</html>
